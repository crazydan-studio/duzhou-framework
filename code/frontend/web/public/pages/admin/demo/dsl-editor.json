{
  "type": "dsl-editor",
  "api": {
    "mutation": "",
    "query": "/pages/admin/demo/data/dsl-editor.data.json"
  },
  "layout": {
    "direction": "horizontal"
  },
  "onEvent": {
    "node:preference:close": {
      "actions": [
        {
          "actionType": "closeDrawer",
          "componentId": "node-preference-editor"
        }
      ]
    },
    "node:preference:show": {
      "actions": [
        {
          "actionType": "drawer",
          "drawer": {
            "type": "drawer",
            "id": "node-preference-editor",
            "title": "${node.data.title}",
            "overlay": false,
            "resizable": true,
            "closeOnEsc": true,
            "position": "bottom",
            "body": [
              {
                "type": "amis",
                "name": "node.data.editor"
              }
            ],
            "onEvent": {
              "confirm": {
                "actions": [
                  {
                    "actionType": "toast",
                    "args": {
                      "msg": "confirm"
                    }
                  }
                ]
              },
              "cancel": {
                "actions": [
                  {
                    "actionType": "toast",
                    "args": {
                      "msg": "cancel"
                    }
                  }
                ]
              }
            }
          }
        }
      ]
    }
  },
  "xdef": {
    "type": "app",
    "title": "应用",
    "icon": "fa-brands fa-docker",
    "mandatory": true,
    "props": {
      "title": "string",
      "subTitle": "text",
      "code": "code",
      "url": "url",
      "logo": "image",
      "groupId": "code"
    },
    "children": [
      {
        "type": "web",
        "title": "Web 前端",
        "icon": "fa-solid fa-computer",
        "mandatory": true,
        "props": {},
        "x:define": {
          "site": {
            "icon": "fa-solid fa-globe",
            "props": {
              "title": "string",
              "subTitle": "url"
            },
            "children": [
              {
                "x:extends": "site:resource"
              }
            ]
          },
          "site:resource": {
            "type": "resource",
            "title": "资源",
            "icon": "fa-solid fa-file-lines",
            "multiple": true,
            "props": {
              "title": "string",
              "icon": "icon",
              "url": "v-path"
            },
            "children": [
              {
                "x:extends": "site:resource"
              }
            ]
          }
        },
        "children": [
          {
            "x:extends": "site",
            "type": "defaultSite",
            "title": "默认站点",
            "subTitle": "/*",
            "mandatory": true,
            "props": {}
          },
          {
            "x:extends": "site",
            "type": "site",
            "title": "功能站点",
            "multiple": true
          }
        ]
      },
      {
        "type": "services",
        "title": "后端服务",
        "icon": "fa-solid fa-gears",
        "mandatory": true,
        "props": {},
        "children": [
          {
            "type": "service",
            "title": "后端服务",
            "icon": "fa-solid fa-gear",
            "multiple": true,
            "props": {
              "code": "code",
              "title": "string"
            },
            "children": [
              {
                "type": "bizLibs",
                "title": "业务接口",
                "icon": "fa-solid fa-right-left",
                "mandatory": true,
                "props": {},
                "children": [
                  {
                    "type": "biz",
                    "title": "业务接口",
                    "icon": "fa-solid fa-angles-up",
                    "multiple": true,
                    "props": {
                      "title": "string",
                      "path": "v-path"
                    }
                  }
                ]
              },
              {
                "type": "metaLibs",
                "title": "业务模型",
                "icon": "fa-solid fa-cubes",
                "mandatory": true,
                "props": {},
                "children": [
                  {
                    "type": "meta",
                    "title": "业务模型",
                    "icon": "fa-solid fa-cube",
                    "multiple": true,
                    "props": {
                      "title": "string",
                      "path": "v-path"
                    }
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
}
